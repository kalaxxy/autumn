(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{401:function(e,t,i){},404:function(e,t,i){"use strict";var s=i(401);i.n(s).a},406:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"rewiews"},[e._m(0),i("div",{staticClass:"section__content"},[e.isShown?i("div",{staticClass:"section__block section__block--editing"},[e._m(1),i("form",{staticClass:"form reviews__form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[i("div",{staticClass:"form__pic"},[i("div",{staticClass:"form__upload-photo"},[i("div",{staticClass:"form__preview",class:{filled:e.renderedPhoto.length},style:{backgroundImage:"url("+e.renderedPhoto+")"}}),i("label",{staticClass:"form__file--photo"},[e._v("Добавить фото"),i("input",{staticClass:"form__file-input",attrs:{type:"file",name:"review-photo"},on:{change:e.appendPhoto}})])])]),i("div",{staticClass:"form__col"},[i("div",{staticClass:"form__row form__row--col"},[i("label",{staticClass:"form__elem form__elem--width80"},[i("span",{staticClass:"form__label"},[e._v("Имя автора")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editedReview.author,expression:"editedReview.author"}],staticClass:"form__input",attrs:{type:"text",name:"review-name"},domProps:{value:e.editedReview.author},on:{input:function(t){t.target.composing||e.$set(e.editedReview,"author",t.target.value)}}})]),i("label",{staticClass:"form__elem form__elem--width80"},[i("span",{staticClass:"form__label"},[e._v("Титул автора")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editedReview.occ,expression:"editedReview.occ"}],staticClass:"form__input",attrs:{type:"text",name:"review-position"},domProps:{value:e.editedReview.occ},on:{input:function(t){t.target.composing||e.$set(e.editedReview,"occ",t.target.value)}}})])]),i("label",{staticClass:"form__elem"},[i("span",{staticClass:"form__label"},[e._v("Отзыв")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editedReview.text,expression:"editedReview.text"}],staticClass:"form__desc",attrs:{name:"review-text"},domProps:{value:e.editedReview.text},on:{input:function(t){t.target.composing||e.$set(e.editedReview,"text",t.target.value)}}})]),e._m(2)])])]):e._e(),i("div",{staticClass:"section-block__add"},[i("button",{staticClass:"section-block__new",attrs:{type:"button"},on:{click:e.createForm}},[i("span",{staticClass:"section-block__plus"},[e._v("+")]),i("span",{staticClass:"section-block__plus-text"},[e._v("Добавить отзыв")])])]),e._l(e.reviews,function(t){return i("review",{key:t.id,attrs:{review:t},on:{"edit-review":e.editReview}})})],2)])};s._withStripped=!0;var o=i(71);function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){a(e,t,i[t])})}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={components:{review:function(){return i.e(6).then(i.bind(null,411))}},data:function(){return{review:{author:"",occ:"",photo:"",text:""},renderedPhoto:"",editedReview:n({},this.review),isEdit:!1,isShown:!1}},created:function(){this.fetchReviews()},computed:n({},Object(o.c)("reviews",{reviews:function(e){return e.reviews}})),methods:n({},Object(o.b)("reviews",["fetchReviews","addReview","updateReview"]),{createForm:function(){this.isEdit=!1,this.isShown=!0,this.editedReview=n({},this.review)},appendPhoto:function(e){var t=this,i=e.target.files[0];this.editedReview.photo=i;var s=new FileReader;try{s.readAsDataURL(i),s.onload=function(){t.renderedPhoto=s.result}}catch(e){}},editReview:function(e){this.isEdit=!0,this.isShown=!0,this.editedReview=e,this.renderedPhoto="https://webdev-api.loftschool.com/"+e.photo},submitForm:function(){this.isEdit?(this.updateReview(this.editedReview),this.isShown=!1):(this.addReview(this.editedReview),this.isShown=!1)}})},c=(i(404),i(51)),l=Object(c.a)(r,s,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section__header"},[t("h2",{staticClass:"section__title"},[this._v("Блок «Отзывы»")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section__subtitle"},[t("h3",[this._v("Новый отзыв")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form__row"},[t("button",{staticClass:"form__btn-cancel",attrs:{type:"reset"}},[this._v("Отмена")]),t("button",{staticClass:"button__submit form__btn",attrs:{type:"submit"}},[this._v("Сохранить")])])}],!1,null,null,null);l.options.__file="src/admin/components/reviews.vue";t.default=l.exports}}]);